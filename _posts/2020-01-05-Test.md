---
layout:     post
title:      "RAC的使用"
subtitle:   " \"关于RAC使用的一些相关汇总\""
date:       2020-01-09 12:00:00
author:     "jsw_cool"
header-img: "img/post-bg-2015.jpg"
catalog: true
tags:
    - iOS
---

### 什么是RAC

ReactiveCocoa(简称RAC),是GitHub上开源的一个应用于iOS和OS X开发的一个新框架.RAC具有函数式编程和响应者编程的特性.

### RAC作用

更加便捷的监控状态的变化,为MVVM的实现提供了很大的帮助

### RAC使用事例

1.键值观察--监听TF的值发生变化
```
- (void)demo1{
    @weakify(self);
    //rac针对于textfield封装了textSignal,订阅此信号可以监控到值的变化
    [self.tF.rac_textSignal subscribeNext:^(NSString *value) {
        @strongify(self);
        self.value = value;
    }];

    //当self.value的值变化时调用Block，这是用KVO的机制，RAC封装了KVO为RACObserve
    [RACObserve(self, value) subscribeNext:^(NSString *value) {
        NSLog(@"%@",value);
    }];
  }
```
2.map的使用
```
- (void)demo2{
    //创建一个信号
    RACSignal *signalA = [RACSignal createSignal:^RACDisposable *(id<RACSubscriber> subscriber) {
        //这个信号里面有一个Next事件的玻璃球和一个complete事件的玻璃球
        [subscriber sendNext:@"唱歌"];
        [subscriber sendCompleted];
        return nil;
    }];
   
    //对信号进行改进,当信号里面流的是唱歌.就改进为'跳舞'返还给self.value
    RAC(self, tF.text) = [signalA map:^id(NSString *value) {
        if ([value isEqualToString:@"唱歌"]) {
            return @"跳舞";
        }
        return @"";
    }];     
}
```

3.filter的使用
```
[[self.textField.rac_textSignal filter:^BOOL(NSString * _Nullable value) {
        return value.length > 5;
}] subscribeNext:^(NSString * _Nullable x) {
        NSLog(@"%@",x);
}];
```
